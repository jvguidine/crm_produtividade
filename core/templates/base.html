{% load static %}
<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}Mini CRM de Produtividade{% endblock %}</title>

  <style>
    :root { --bg:#0b1220; --card:#121a2b; --muted:#94a3b8; --text:#e2e8f0; --brand:#60a5fa; --ok:#22c55e; --warn:#f59e0b; --err:#ef4444; }
    * { box-sizing: border-box; }
    body { margin:0; background: var(--bg); color: var(--text); font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    a { color: var(--brand); text-decoration: none; }
    a:hover { text-decoration: underline; }
    header { background: #0f172a; border-bottom: 1px solid #1f2a44; }
    .nav { max-width: 980px; margin: 0 auto; padding: 12px 16px; display: flex; gap: 14px; align-items: center; justify-content: space-between; }
    .nav-left, .nav-right { display:flex; gap:14px; align-items:center; }
    .brand { font-weight: 700; letter-spacing: .3px; color: #93c5fd; }
    .pill { padding: 6px 10px; background: #1b2440; border: 1px solid #2a3a66; border-radius: 999px; }
    .container { max-width: 980px; margin: 22px auto; padding: 0 16px 28px; }
    .card { background: var(--card); border: 1px solid #223154; border-radius: 14px; padding: 18px; }
    h1 { font-size: 22px; margin: 0 0 14px; }
    h2 { font-size: 18px; margin: 18px 0 10px; color: #c7d2fe; }
    ul { padding-left: 18px; }
    .btn { display:inline-block; padding:8px 12px; border-radius:10px; border:1px solid #2a3a66; background:#18213b; color:var(--text); }
    .btn:hover { background:#1e2a4a; }
    .btn-ok { border-color:#14532d; background:#0a1f14; color:#86efac; }
    .btn-ok:hover { background:#0f2b1b; }
    .msg { margin:10px 0; padding:10px 12px; border-radius:10px; border:1px solid #334155; background:#0f172a; }
    .msg.ok { border-color:#166534; background:#052e16; color:#86efac; }
    .msg.warn { border-color:#92400e; background:#331a00; color:#fdba74; }
    .msg.err { border-color:#7f1d1d; background:#2a0a0a; color:#fca5a5; }
    .table { width:100%; border-collapse: collapse; }
    .table th, .table td { border-bottom:1px solid #223154; padding:10px; text-align:left; }
    .table th { color:#c7d2fe; font-weight:600; }
    .empty { color: var(--muted); }
    footer { color: var(--muted); font-size: 12px; text-align:center; padding: 18px 0 32px; }
  </style>
</head>
<body>
  <header>
    <div class="nav">
      <div class="nav-left">
        <a class="brand" href="{% url 'home' %}">Mini CRM</a>
        <a class="pill" href="{% url 'listar_tarefas' %}">Minhas tarefas</a>
        <a class="pill" href="{% url 'listar_usuarios' %}">Usuários</a>
      </div>
    <div class="nav-right">
      {% if user.is_authenticated %}
        <a class="pill" href="{% url 'criar_tarefa' %}">+ Nova tarefa</a>
        <span class="pill">Olá, {{ user.get_username }}</span>
        <a class="pill" href="{% url 'logout' %}">Sair</a>
      {% else %}
        <a class="pill" href="{% url 'login' %}">Entrar</a>
        <a class="pill" href="{% url 'registrar' %}">Registrar</a>
      {% endif %}
    </div>

    </div>
  </header>

  <div class="container">
    {% if messages %}
      {% for message in messages %}
        {% with level=message.tags %}
          <div class="msg {% if 'success' in level %}ok{% elif 'warning' in level %}warn{% elif 'error' in level %}err{% endif %}">
            {{ message }}
          </div>
        {% endwith %}
      {% endfor %}
    {% endif %}

    {% block content %}{% endblock %}
  </div>

  <footer>
    <div class="container">
      <div class="card">Projeto acadêmico – EmpreagaSenac / Mini CRM de Produtividade</div>
    </div>
  </footer>
</body>
</html>
